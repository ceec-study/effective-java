# 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라

상속을 하기 위해서는 상속을 고려한 설계와 문서화가 필요하다.

### 문서화

- 상속용 클래스는 재정의할 수 있는 메서드들을 내부적으로 어떻게 이용하는지(자기사용) 문서로 남겨야 한다.
- 클래스의 API로 공개된 메서드에서 클래스 자신의 또 다른 메서드를 호출할 수도 있다. 그런데 마침 호출되는 메서드가 재정의 가능 메서드라면 그 사실을 호출하는 메서드의 API 설명에 적시해야 한다.
- 또한, 어떤 순서로 호출하는지, 각각의 호출 결과가 이어지는 처리에 어떤 영향을 주는지도 담아야 한다.
- `@implSpec` 태그(java 8부터 사용)를 붙여주면 자바독 도구가 "Implementation Requirements" 절에 내부 동작 방식을 생성해준다.

### 원칙

- 상속용 클래스를 시험하는 방법은 직접 하위 클래스를 만들어보는 것이 유일하다.
  <br/>하위 클래스를 직접 구현해보면 꼭 필요한 protected 멤버와 필요하지 않는 protected 멤버를 알 수 있다. 상속용으로 설계한 클래스는 배포 전에 반드시 하위 클래스를 만들어 검증해야한다.

- 상속용 클래스의 생성자는 직접적으로든 간접적으로든 재정의 가능한 메서드를 호출해서는 안된다. private, final, static 메서드는 재정의가 불가능하므로 생성자에서 안심하고 호출해도 된다.

- 상속용 클래스에서 Cloneable, Serializable을 구현할지 정해야한다면, clone과 readObject 모두 직간접적으로 재정의 가능한 메서드를 호출해서는 안된다.

- 상속용으로 설계되지 않은 클래스는 상속을 금지해야한다.
