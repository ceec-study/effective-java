# 클래스와 인터페이스

## 클래스와 맴버의 접근 권한을 최소화하라

- 클래스의 내부 데이터와 내부 구현 정보를 외부 컴포넌트로부터 완벽히 숨겨 구현과 API를 분리하는 게 잘 설계된 컴포넌트이다.
- 오직 API로만 다른 컴포넌트와 소통하고 내부 동작 방식에는 전혀 영향을 받지 않는다.

### 캡슐화(정보 은닉)의 장점

- 개발 속도 높임
- 시스템 관리 비용을 낮춤
- 성능 최적화에 도움을 준다.
- 소프트웨어 재사용성을 높인다.
- 큰 시스템을 제작하는 난이도를 낮춘다.

### 접근 제한자

- 정보 은닉을 위한 장치
- private, protected, public

### 정보 은닉의 원칙

- 모든 클래스와 멤버의 접근성을 최대한 좁혀야 한다.
- 톱레벨 클래스와 인터페이스에 부여할 수 있는 접근 수준은 package-private과 public 두 가지다.

  - public으로 선언하면 공개 API가 된다.
    <br/>=> 하위 호환을 위해서 영원히 관리해야할 대상이 된다.

  - package-private(default)로 선언하면 해당 패키지 안에서만 이용할 수 있다.
    - 외부 패키지에서 쓸 일이 없다면 package-private를 선택한다.
    - 클라이언트에 아무런 피해 없이 다음 릴리즈에서 수정, 교체, 제거할 수 있다.

- 멤버(필드, 메서드, 중첩 클래스, 중첩 인터페이스)에 부여할 수 있는 접근 수준

  - private : 멤버를 선언한 톱레벨 클래스에서만 접근 가능

  - package-private(default) : 멤버가 소속된 패키지 안의 모든 클래스에서 접근 가능

  - protected : package-private의 접근 범위를 포함하며, 이 멤버를 선언한 클래스의 하위 클래스에서도 접근할 수 있다.

  - public : 모든 곳에서 접근할 수 있다.

- 클래스의 공개 API 외의 모든 멤버는 private로 만들고 오직 같은 패키지의 다른 클래스가 접근해야하는 멤버에 한해 package-private로 풀어주는 것이 좋다.

  - 권한을 자주 풀어주게 된다면 컴포넌트를 더 분해해야하는지에 대해 고민봐야 한다.

- protected 멤버는 적을수록 좋다.
- 테스트를 위해서 접근 범위를 넓히지 말자.
- 상위 클래스의 메서드를 재정의할 때는 접근 수준을 상위 클래스보다 좁게 설정할 수 없다.
- 클래스가 인터페이스를 구현할 때는, 인터페이스가 정의한 모든 메서드를 public으로 선언해야 한다.

  - 인터페이스가 모두 public이기 때문에

- public 클래스의 인스턴스 필드는 되도록이면 public이 아니어야 한다.

### 모듈

- Java9 부터 도입된 개념
- 패키지는 클래스들의 묶음이라면, 모듈은 패키지들의 묶음
- 모듈은 클래스를 외부에 공개하지 않으면서도 같은 모듈을 이루는 패키지 사이에서 자유롭게 공유할 수 있다.
- 모듈의 모든 장점을 누리기 위해서는 패키지들을 모듈 단위로 묶고, 모듈 선언에 패키지들의 모든 의존성을 명시해야한다. 그런 다음 소스 트리를 재배치하고, 모듈 안에서 일반 패키지로의 모든 접근에 특별한 조치를 취해야 한다. 그러므로, 꼭 필요한 경우가 아니라면 당분간은 사용하지 않는 것이 좋다.
