# 인터페이스는 구현하는 쪽을 생각해 설계해라

- 자바 8 이전에는 인터페이스에 메서드를 추가하면 컴파일 오류가 발생했다.
- 자바 8부터 디폴트 메서드가 생겼지만 완전히 안전한 것은 아니기 때문에 주의해야 한다.

### 디폴트 메서드

- 인터페이스를 구현한 클래스가 디폴트 메서드를 재정의하지 않으면 디폴트 메서드를 그대로 사용하게 된다.
  이때 기존 구현체들과 메서드가 매끄럽게 연동될 거라는 보장은 없다.
- 자바 8에서는 핵심 컬렉션 인터페이스들에 다수의 디폴트 메서드가 추가되었다. 주로 람다를 활용하기 위해서!

  - 디폴트 메서드는 범용적이기 때문에 대부분 잘 작동하지만 완전히 불변식을 헤치지 않는다고 확신할 수 없다.
  - 이는 예기치 못한 이슈를 불러올 수 있다.
  - e.g. Collection 인터페이스의 removeIf 메서드

- 디폴트 메서드에서 발생할 수 있는 이러한 문제를 예방하기 위해서 1) 디폴트 클래스를 재정의하고 2) 다른 메서드에서는 디폴트 메서드를 호출하기 전에 필요한 작업을 수행하도록 하였다.

### 정리

- 기존 인터페이스에 디폴트 메서드를 추가하는 일은 피하자.
- 불가피하게 추가해야 한다면 디폴트 메서드가 기존 구현체들과 충돌하진 않을지 심사숙고해야 한다.
- 새로운 인터페이스를 만드는 경우에는 디폴트 메서드가 구현을 쉽게 할 수 있는 역할을 한다.
- 이처럼 인터페이스를 설계할 때는 세심한 주의가 필요하다.
